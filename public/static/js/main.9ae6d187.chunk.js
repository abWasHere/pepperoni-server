(this["webpackJsonppepperoni-client"]=this["webpackJsonppepperoni-client"]||[]).push([[0],{181:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a(1),n=a.n(s),c=a(21),i=a.n(c),l=(a(96),a(97),a(15)),o=a(12),u=a(4),d=a(84),j=a(8),b=a(86),m=function(e){var t=e.component,a=Object(d.a)(e,["component"]),s=Object(j.c)((function(e){return e.authStore}));return Object(r.jsx)(o.Route,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return!0===s.isAuthentificated?Object(r.jsx)(t,Object(u.a)({},e)):Object(r.jsx)(b.Redirect,{to:"/admin/login"})}}))},p=a(6),h=a.n(p),O=a(9),f=a(29),x=a.n(f),v=x.a.create({baseURL:"https://pepperoni-restaurant.herokuapp.com/api/auth",withCredentials:!0}),g={service:v,registerUser:function(e){return v.post("/signup",e)},login:function(e){return v.post("/login",e)},isLoggedIn:function(e){return v.get("isLoggedIn/".concat(e))},logout:function(){return v.get("/logout")}},N=function(e,t){return{type:e,error:!0,payload:t}},y=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.registerUser(e);case 3:r=t.sent,a({type:"auth/registerUser",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(N("auth/registerUser_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},M=Object(o.withRouter)((function(e){var t=Object(j.c)((function(e){return e.authStore})),a=Object(j.b)();return Object(r.jsx)("div",{className:"NavLinksAuth",children:Object(r.jsxs)("ul",{className:"flex-row",children:[!t.isAuthentificated&&Object(r.jsx)("li",{children:Object(r.jsx)(l.c,{to:"/admin/login",className:"nav-link",children:"Personnel"})}),t.isAuthentificated&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("li",{className:"nav-link",style:{cursor:"default"},children:[t.user.privileges," : ",Object(r.jsx)("b",{children:t.user.firstName})]}),"admin"===t.user.privileges&&Object(r.jsx)(l.c,{to:"/admin/staff",className:"nav-link",children:"Liste du Personnel"}),Object(r.jsx)("li",{onClick:function(){a(function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.logout();case 3:a=e.sent,localStorage.removeItem("sessionCookie"),localStorage.removeItem("sessionUser"),t({type:"auth/logout",payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(N("auth/logout_error",e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),setTimeout((function(){a((function(e){e({type:"auth/clearMessages"})}))}),4e3),e.history.push("/admin/login")},className:"nav-link",children:"D\xe9connexion"})]})]})})})),w=Object(o.withRouter)((function(){return Object(j.c)((function(e){return e.authStore})).isAuthentificated?Object(r.jsx)("div",{className:"NavLinks",children:Object(r.jsxs)("ul",{className:"flex-row sp-center",children:[Object(r.jsx)("li",{children:Object(r.jsx)(l.c,{to:"/admin/menu/update",className:"nav-link",children:"Modifier la carte"})}),Object(r.jsx)("li",{children:Object(r.jsx)(l.c,{to:"/admin/reservations",className:"nav-link",children:"Voir les r\xe9servations"})})]})}):Object(r.jsx)("div",{})})),S=Object(o.withRouter)((function(e){return Object(r.jsx)("div",{className:"NavLinks",children:Object(r.jsxs)("ul",{className:"flex-row sp-center",children:[Object(r.jsx)("li",{children:Object(r.jsx)(l.b,{to:"/menu",className:"nav-link",children:"La Carte"})}),Object(r.jsx)("li",{children:Object(r.jsx)(l.b,{to:"/reservation",className:"nav-link",children:"R\xe9server une table"})})]})})})),k=function(){return Object(r.jsxs)("div",{className:"NavMain flex-col sp-btw",children:[Object(r.jsx)(M,{}),Object(r.jsxs)("header",{className:"nav-header",children:[Object(r.jsx)(l.b,{to:"/",children:Object(r.jsx)("h1",{className:"nav-title",children:"Pepperoni ."})}),Object(r.jsxs)("h2",{className:"nav-subtitle",children:[Object(r.jsx)("span",{children:"Italian"})," cuisine",Object(r.jsx)("span",{children:" in Paris"})]})]}),Object(r.jsx)(w,{}),Object(r.jsx)(S,{})]})},_=function(){return Object(r.jsxs)("div",{className:"Banner flex-col sp-center",children:[Object(r.jsx)("h1",{className:"title",children:"Pepperoni ."}),Object(r.jsxs)("h2",{className:"banner-title",children:[Object(r.jsx)("span",{children:"Italian"})," cuisine",Object(r.jsx)("span",{children:" in Paris"})]})]})},C=function(){return Object(r.jsxs)("div",{className:"About flex-row sp-center",children:[Object(r.jsx)("div",{className:"chef-image"}),Object(r.jsxs)("div",{className:"chef-presentation",children:[Object(r.jsx)("h2",{className:"sub-title",children:"Le mot du Chef"}),Object(r.jsxs)("p",{className:"citation",children:['"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas maxime quidem voluptate nihil nisi. Perspiciatis voluptatum delectus omnis, et veritatis distinctio quis non cupiditate nesciunt, molestiae rerum maxime voluptas. ',Object(r.jsx)("br",{}),' Grazie."']}),Object(r.jsx)("p",{className:"chef-signature",children:"Toni 'Peppe' Mattarella"})]})]})},R=a(17),E=a(54),L=[{url:a.p+"static/media/restau-1.59b7cdd1.jpg",alt:"Le Bar"},{url:a.p+"static/media/restau-2.0fa5b68f.jpg",alt:"La Cuisine"},{url:a.p+"static/media/restau-3.fa53906b.jpg",alt:"La Salle"},{url:a.p+"static/media/restau-4.33c6db4b.jpg",alt:"La Salle"},{url:a.p+"static/media/restau-5.1030acde.jpg",alt:"La Salle"},{url:a.p+"static/media/restau-6.12de278b.jpg",alt:"La Terrasse"}],A=function(){var e=n.a.useState(0),t=Object(R.a)(e,2),a=t[0],s=t[1];return Object(r.jsx)(E.a,{activeIndex:a,onSelect:function(e,t){s(e)},className:"Carousel",children:L.map((function(e,t){return Object(r.jsxs)(E.a.Item,{interval:4e3,children:[Object(r.jsx)("img",{className:"d-block w-9 carousel-pic",src:e.url,alt:e.alt}),Object(r.jsx)(E.a.Caption,{children:Object(r.jsx)("p",{children:e.alt})})]},t)}))})},U=function(){return Object(r.jsxs)("div",{className:"Gallery",children:[Object(r.jsx)("h2",{className:"sub-title",children:"Le restaurant"}),Object(r.jsx)("div",{className:"carousel-container",children:Object(r.jsx)(A,{})})]})},D=function(){return Object(r.jsxs)("div",{className:"Home",children:[Object(r.jsx)(_,{}),Object(r.jsx)(C,{}),Object(r.jsx)(U,{})]})},I=x.a.create({baseURL:"https://pepperoni-restaurant.herokuapp.com/api/food",withCredentials:!0}),P={service:I,getAllFood:function(){return I.get()},getMeal:function(e){return I.get("/".concat(e))},createMeal:function(e){return I.post("/create",e)},updateMeal:function(e,t){return I.patch("/edit/".concat(e),t)},deleteMeal:function(e){return I.delete("/delete/".concat(e))}},T=function(e,t){return{type:e,error:!0,payload:t}},q=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getAllFood();case 3:a=e.sent,t({type:"food/getMenu",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(T("food/getMenu_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.createMeal(e);case 3:r=t.sent,a({type:"food/create",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(T("food/create_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e,t){return function(){var a=Object(O.a)(h.a.mark((function a(r){var s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,P.updateMeal(e,t);case 3:s=a.sent,r({type:"food/update",payload:s.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r(T("food/update_error",a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},z=function(e){var t=Object(j.c)((function(e){return e.foodStore.menu})),a=Object(j.b)();return Object(s.useEffect)((function(){a(q())}),[a]),Object(r.jsxs)("div",{className:"Menu",children:[Object(r.jsx)("h3",{className:"sub-title",children:"La Carte"}),Object(r.jsxs)("div",{className:"menu menu-starters",children:[Object(r.jsx)("h4",{children:"Antipasti"}),Object(r.jsx)("table",{children:Object(r.jsx)("tbody",{children:t.map((function(e){return"antipasti"===e.category&&Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{className:"dish-name",children:e.foodName}),Object(r.jsx)("td",{className:"dish-description",children:e.description}),Object(r.jsxs)("td",{className:"dish-price",children:[e.price," \u20ac"]})]},e._id)}))})})]}),Object(r.jsxs)("div",{className:"menu menu-mains",children:[Object(r.jsx)("h4",{children:"Plats"}),Object(r.jsx)("table",{children:Object(r.jsx)("tbody",{children:t.map((function(e){return"principal"===e.category&&Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{className:"dish-name",children:e.foodName}),Object(r.jsx)("td",{className:"dish-description",children:e.description}),Object(r.jsxs)("td",{className:"dish-price",children:[e.price," \u20ac"]})]},e._id)}))})})]}),Object(r.jsxs)("div",{className:"menu menu-deserts",children:[Object(r.jsx)("h4",{children:"Desserts"}),Object(r.jsx)("table",{children:Object(r.jsx)("tbody",{children:t.map((function(e){return"dessert"===e.category&&Object(r.jsx)("tr",{children:Object(r.jsxs)("th",{className:"dish-name",children:[e.foodName," ",Object(r.jsxs)("span",{className:"dish-price",children:[" - ",e.price," \u20ac"]})]})},e._id)}))})})]})]})},J=a(28),B=a(51),H=x.a.create({baseURL:"https://pepperoni-restaurant.herokuapp.com/api/tables",withCredentials:!0}),X={service:H,getAllReservations:function(){return H.get("/reservations")},postSlot:function(e){return H.post("/slot",e)},postReservation:function(e){return H.post("/reservation",e)},cancelReservation:function(e){return H.patch("/cancelation",e)},getTables:function(){return H.get("/")},getSlot:function(e){return H.get("/slot/".concat(e))}},G=function(e,t){return{type:e,error:!0,payload:t}},Q=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.getAllReservations();case 3:a=e.sent,t({type:"reservation/getReservations",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(G("reservation/getReservations_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},K=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.postReservation(e);case 3:r=t.sent,a({type:"reservation/create",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(G("reservation/create_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e,t){return function(){var a=Object(O.a)(h.a.mark((function a(r){var s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,X.cancelReservation({slotID:e,tableID:t});case 3:s=a.sent,r({type:"reservation/cancel",payload:s.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r(G("reservation/cancel_error",a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},Y=a(87),Z=a.n(Y),$=(a(121),["12h00","12h30","13h00","13h30","14h00"]),ee=["19h00","19h30","20h00","20h30","21h00","21h30","22h00"],te=[].concat($,ee),ae=[{day:0,hours:$},{day:1,hours:[]},{day:2,hours:ee},{day:3,hours:te},{day:4,hours:te},{day:5,hours:te},{day:6,hours:te}],re=function(){var e,t=Object(j.b)(),a=Object(j.c)((function(e){return e.reservationStore.slot}));a&&(e=Math.max.apply(Math,Object(B.a)(a.tables.map((function(e){return e.capacity})))));var n=Object(j.c)((function(e){return e.reservationStore.successMessage})),c=Object(j.c)((function(e){return e.reservationStore.errorMessage})),i=Object(s.useState)(!1),l=Object(R.a)(i,2),o=l[0],d=l[1],b=Object(s.useState)(new Date),m=Object(R.a)(b,2),p=m[0],f=m[1],x=Object(s.useState)(""),v=Object(R.a)(x,2),g=v[0],N=v[1],y=ae.filter((function(e){return e.day===(null===p||void 0===p?void 0:p.getDay())}))[0].hours,M=Object(s.useState)({slotID:"",seats:"",client:{clientName:"",clientPhone:"",clientEmail:""}}),w=Object(R.a)(M,2),S=w[0],k=w[1];Object(s.useEffect)((function(){var e,a;p&&g&&(t((e=p,a=g,function(){var t=Object(O.a)(h.a.mark((function t(r){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.postSlot({requestedDate:e,requestedTime:a});case 3:s=t.sent,r({type:"reservation/slot",payload:s.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(G("reservation/slot_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),d(!0))}),[p,g]),Object(s.useEffect)((function(){a&&k(Object(u.a)(Object(u.a)({},S),{},{slotID:a._id}))}),[a]);var _=function(e){if(null===c||void 0===c?void 0:c[e])return"unavailability"===e?Object(r.jsxs)("div",{className:"form-error-msg",children:[c.unavailability,Object(r.jsx)("br",{})," :("]}):Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",c[e]]})},C=function(e){var t=e.target.name,a=e.target.value;"time"===t?N(a):k("seats"===t?Object(u.a)(Object(u.a)({},S),{},{seats:Number(a)}):Object(u.a)(Object(u.a)({},S),{},{client:Object(u.a)(Object(u.a)({},S.client),{},Object(J.a)({},t,a))}))},E=function(){var e=Object(O.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(K(S));case 3:setTimeout((function(){t((function(e){e({type:"reservation/clearMessages"})}))}),1e4);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"ReservationForm form-container",children:[n&&Object(r.jsx)("div",{className:"info-box",children:n}),Object(r.jsx)("form",{className:"mui-form",onChange:C,onSubmit:E,children:Object(r.jsxs)("div",{className:"flex-row",children:[Object(r.jsxs)("div",{className:"form-left-side",children:[Object(r.jsxs)("div",{className:"mui-select",children:[Object(r.jsx)(Z.a,{className:"datepicker",dateFormat:"yyyy-MM-dd",minDate:new Date,maxDate:(new Date).setMonth((new Date).getMonth()+2),filterDate:function(e){return function(e,t,a){var r=new Date(e).getDay();return r!==t&&r!==a}(e,1)},selected:p,onChange:function(e){f(e),N("")},required:!0}),Object(r.jsx)("label",{children:"Date"})]}),Object(r.jsxs)("div",{className:"mui-select",children:[Object(r.jsxs)("select",{name:"time",onChange:C,value:g,required:!0,children:[Object(r.jsx)("option",{hidden:!0,children:"Choix"}),y&&y.map((function(e,t){return Object(r.jsx)("option",{children:e},t)}))]}),Object(r.jsx)("label",{children:"Heure"})]}),_("time"),_("unavailability")]}),o&&Object(r.jsxs)("div",{className:"form-right-side",children:[Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"number",min:"1",max:e,name:"seats",onChange:C,required:!0}),Object(r.jsx)("label",{children:"Nombre de personnes"})]}),_("capacity"),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"text",name:"clientName",onChange:C,required:!0}),Object(r.jsx)("label",{children:"Votre nom"})]}),_("clientName"),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"tel",name:"clientPhone",onChange:C,required:!0}),Object(r.jsx)("label",{children:"T\xe9l\xe9phone"})]}),_("clientPhone"),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"email",name:"clientEmail",onChange:C}),Object(r.jsx)("label",{children:"Email (optionnel)"})]}),_("clientEmail"),Object(r.jsxs)("div",{className:"information-text",children:["Nos tables accueillent jusqu'\xe0 ",e," couverts. ",Object(r.jsx)("br",{}),"Si vous souhaitez r\xe9server pour un plus grand nombre de personnes, merci de nous appeler directement."]}),Object(r.jsx)("button",{type:"submit",onSubmit:E,className:"mui-btn mui-btn--raised",children:"R\xe9server"})]})]})})]})},se=function(){return Object(r.jsxs)("div",{className:"Reservation",children:[Object(r.jsx)("h2",{className:"sub-title",children:"R\xe9server une table"}),Object(r.jsx)(re,{})]})},ne=function(){return Object(r.jsxs)("div",{className:"Contact",children:[Object(r.jsxs)("div",{className:"contact",children:[Object(r.jsx)("p",{className:"col-title",children:"CONTACT"}),Object(r.jsxs)("p",{children:[Object(r.jsx)("i",{className:"fas fa-phone fa-sm icon"})," 01 23 45 67 89"]})]}),Object(r.jsxs)("div",{className:"contact",children:[Object(r.jsx)("p",{className:"col-title",children:"NOS RESEAUX SOCIAUX"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("a",{href:"/",noopener:"true",children:Object(r.jsx)("i",{className:"fab fa-facebook-f fa-2x icon"})}),Object(r.jsx)("a",{href:"/",noopener:"true",children:Object(r.jsx)("i",{className:"fab fa-instagram fa-2x icon"})})]})]})]})},ce=function(){return Object(r.jsxs)("div",{className:"Location",children:[Object(r.jsx)("p",{className:"col-title",children:"NOTRE ADRESSE"}),Object(r.jsx)("p",{children:"Restaurant Pepperoni"}),Object(r.jsx)("p",{children:"123 avenue d'Italie"}),Object(r.jsx)("p",{children:"75013 Paris"})]})},ie=function(){return Object(r.jsxs)("div",{className:"Timetable",children:[Object(r.jsx)("p",{className:"col-title",children:"HORAIRES D'OUVERTURE"}),Object(r.jsx)("div",{className:"table",children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Lundi"}),Object(r.jsx)("td",{children:"Ferm\xe9"})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Mardi"}),Object(r.jsx)("td",{children:"Ferm\xe9 le midi"}),Object(r.jsx)("td",{children:"19h - 23h"})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Mercredi"}),Object(r.jsx)("td",{children:"12h - 15h"}),Object(r.jsx)("td",{children:"19h - 23h"})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Jeudi"}),Object(r.jsx)("td",{children:"12h - 15h"}),Object(r.jsx)("td",{children:"19h - 23h"})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Vendredi"}),Object(r.jsx)("td",{children:"12h - 15h"}),Object(r.jsx)("td",{children:"19h - 23h"})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Samedi"}),Object(r.jsx)("td",{children:"12h - 15h"}),Object(r.jsx)("td",{children:"19h - 23h"})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Dimanche"}),Object(r.jsx)("td",{children:"12h - 15h"}),Object(r.jsx)("td",{children:"Ferm\xe9 le soir"})]})]})})})]})},le=function(){return Object(r.jsxs)("footer",{className:"Footer flex-row sp-btw align-start",children:[Object(r.jsx)(ne,{}),Object(r.jsx)(ce,{}),Object(r.jsx)(ie,{})]})},oe=function(){var e,t,a=Object(j.c)((function(e){return e.authStore})),s=Object(j.b)();return Object(r.jsxs)("div",{className:"LoginForm form-container",children:[Object(r.jsxs)("form",{className:"mui-form",onSubmit:function(e){var t;e.preventDefault(),s((t={pseudo:e.target.elements[0].value,password:e.target.elements[1].value},function(){var e=Object(O.a)(h.a.mark((function e(a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.login(t);case 3:r=e.sent,localStorage.setItem("sessionCookie",JSON.stringify(r.data.cookie)),localStorage.setItem("sessionUser",JSON.stringify(r.data.user)),a({type:"auth/login",payload:{user:r.data.user,message:r.data.successMessage}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(N("auth/login_error",e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),setTimeout((function(){s((function(e){e({type:"auth/clearMessages"})}))}),4e3),e.target.elements[1].value=""},children:[Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"text",name:"pseudo",required:!0}),Object(r.jsx)("label",{children:"Pseudo"})]}),(null===(e=a.invalidCredentials)||void 0===e?void 0:e.pseudo)&&Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",a.invalidCredentials.pseudo]}),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"password",name:"password",required:!0}),Object(r.jsx)("label",{children:"Mot de passe"})]}),(null===(t=a.invalidCredentials)||void 0===t?void 0:t.password)&&Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",a.invalidCredentials.password]}),Object(r.jsx)("button",{type:"submit",className:"mui-btn edit",children:"Valider"})]}),a.successMessage&&Object(r.jsx)("div",{className:"info-box",children:a.successMessage})]})},ue=function(){return Object(r.jsxs)("div",{className:"Login AdminPage",children:[Object(r.jsxs)("header",{className:"form-header",children:[Object(r.jsx)("h2",{className:"sub-title",children:"Espace r\xe9serv\xe9 au personnel"}),Object(r.jsx)("h3",{children:"Entrez vos identifiants"})]}),Object(r.jsx)(oe,{})]})},de=function(){document.title="Admin | r\xe9servations";var e=Object(j.b)();Object(s.useEffect)((function(){e(Q())}),[e]);var t=Object(j.c)((function(e){return e.reservationStore.reservations})),a=Object(j.c)((function(e){return e.reservationStore.successMessage})),n=function(){var t=Object(O.a)(h.a.mark((function t(a,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(W(a._id,r._id));case 2:return t.next=4,e(Q());case 4:setTimeout((function(){e((function(e){e({type:"reservation/clearMessages"})}))}),5e3);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"ReservationList AdminPage",children:[Object(r.jsx)("h2",{className:"sub-title",children:"G\xe9rer les r\xe9servations"}),Object(r.jsxs)("table",{className:"table",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Date"}),Object(r.jsx)("th",{children:"Heure"}),Object(r.jsx)("th",{children:"Table"}),Object(r.jsx)("th",{children:"Couverts"}),Object(r.jsx)("th",{children:"Nom"}),Object(r.jsx)("th",{children:"T\xe9l\xe9phone"}),Object(r.jsx)("th",{children:"Email"}),Object(r.jsx)("th",{})]})}),Object(r.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return e.tables.map((function(t){return Object(r.jsxs)("tr",{className:"reservation row",children:[Object(r.jsx)("td",{children:e.date.toLocaleString("fr-FR").slice(0,10)}),Object(r.jsx)("td",{children:e.time}),Object(r.jsx)("td",{children:t.tableName}),Object(r.jsx)("td",{children:t.capacity}),Object(r.jsx)("td",{children:t.reservation[0].clientName}),Object(r.jsx)("td",{children:t.reservation[0].clientPhone}),Object(r.jsx)("td",{children:t.reservation[0].clientEmail}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"submit",onClick:function(){return function(e,t){var a=prompt("Etes-vous s\xfbr(e) de vouloir supprimer cette r\xe9servation ? => ".concat(e.date.toLocaleString("fr-FR").slice(0,10)," \xe0 ").concat(e.time,", au nom de ").concat(t.reservation[0].clientName,". Si oui, entrez 'o'."),"non");null!==a&&"o"===a.toLowerCase()?n(e,t):console.log("Abort delete")}(e,t)},className:"mui-btn mui-btn delete",children:Object(r.jsx)("i",{className:"fas fa-trash-alt fa-sm"})})})]},t._id)}))}))})]}),a&&Object(r.jsx)("div",{className:"info-box",children:a})]})},je=function(e,t){console.log("Trying to delete =>",e);var a=prompt("Etes-vous s\xfbr(e) de vouloir supprimer ".concat(e,' ? \nSi oui, entrez "o".'),"non");null!==a&&"o"===a.toLowerCase()?t():console.log("Abort delete")},be=Object(o.withRouter)((function(e){var t=Object(j.c)((function(e){return e.foodStore})),a=Object(j.b)(),n=Object(s.useState)(),c=Object(R.a)(n,2),i=c[0],l=c[1],o=Object(s.useState)(!1),d=Object(R.a)(o,2),b=d[0],m=d[1],p=Object(s.useState)(!1),f=Object(R.a)(p,2),x=f[0],v=f[1];Object(s.useEffect)((function(){i?"dessert"===i.category?i.foodName&&i.price?v(!1):v(!0):i.foodName&&i.price&&i.description?v(!1):v(!0):v(!1)}),[i]);return Object(r.jsx)("div",{className:"EditMenuForm form-container",children:Object(r.jsxs)("form",{className:"mui-form",onChange:function(e){return l(Object(u.a)(Object(u.a)({},i),{},Object(J.a)({},e.target.name,e.target.value)))},onSubmit:function(e){e.preventDefault();var r=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(F(i));case 2:t.errorMessage||m(!0),setTimeout((function(){m(!1),a((function(e){e({type:"food/clearMessages"})}))}),6e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!function(e,t){console.log("Trying to create =>",e);var a=prompt("Etes-vous s\xfbr(e) de vouloir ajouter ".concat(e,' ? \nSi oui, entrez "o".'),"non");null!==a&&"o"===a.toLowerCase()?t():console.log("Abort create")}(i.foodName,r)},children:[Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"text",name:"foodName",required:!0}),Object(r.jsx)("label",{children:"Nom"})]}),Object(r.jsxs)("div",{className:"mui-select mui-select--float-label",children:[Object(r.jsxs)("select",{name:"category",required:!0,children:[Object(r.jsx)("option",{hidden:!0}),Object(r.jsx)("option",{disabled:"disabled",default:!0,children:"Choisir une cat\xe9gorie de plat"}),Object(r.jsx)("option",{value:"antipasti",children:"antipasti"}),Object(r.jsx)("option",{value:"principal",children:"principal"}),Object(r.jsx)("option",{value:"dessert",children:"dessert"})]}),Object(r.jsx)("label",{children:"Cat\xe9gorie"})]}),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"number",name:"price",min:"1",required:!0}),Object(r.jsx)("label",{children:"Prix"})]}),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("textarea",{name:"description"}),Object(r.jsx)("label",{children:"Description"})]}),Object(r.jsx)(r.Fragment,{children:x?Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"})," Veuillez renseigner tous les champs. ",Object(r.jsx)("br",{})]}):t.errorMessage?Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"})," ",t.errorMessage.foodName,Object(r.jsx)("br",{})]}):b?Object(r.jsxs)("div",{className:"info-box",children:[i.foodName," a bien \xe9t\xe9 ajout\xe9 \xe0 la carte."]}):void 0}),Object(r.jsx)("div",{className:"information-text",children:"La description n'est pas requise pour les desserts."}),Object(r.jsxs)("div",{className:"btn-group flex-row sp-btw",children:[Object(r.jsxs)("button",{type:"submit",disabled:x,className:"mui-btn edit",children:[Object(r.jsx)("i",{className:"fas fa-save"})," Enregistrer"]}),Object(r.jsxs)("button",{type:"button",onClick:function(){return e.history.go(0)},className:"mui-btn mui-btn--flat mui",children:[Object(r.jsx)("i",{className:"fas fa-times"})," Effacer le formulaire"]})]})]})})})),me=Object(o.withRouter)((function(e){var t=Object(j.b)();Object(s.useEffect)((function(){t(q())}),[t]);var a=Object(j.c)((function(e){return e.foodStore.menu})),n=Object(s.useState)({}),c=Object(R.a)(n,2),i=c[0],l=c[1],o=Object(s.useState)(!1),d=Object(R.a)(o,2),b=d[0],m=d[1],p=!i.foodName||!i.price||null,f=function(e){if("pickedMeal"===e.target.name){var t=e.target.value,r=a.filter((function(e){return e._id===t}))[0];l(Object(u.a)(Object(u.a)({},r),{},{description:r.description||""}))}else l(Object(u.a)(Object(u.a)({},i),{},Object(J.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(O.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(V(i._id,i)),m(!0),setTimeout((function(){m(!1)}),6e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"EditMenuForm form-container",children:Object(r.jsxs)("form",{className:"mui-form",onSubmit:x,children:[Object(r.jsxs)("div",{className:"mui-select",children:[Object(r.jsxs)("select",{name:"pickedMeal",id:"pickedMeal",required:!0,onChange:f,children:[Object(r.jsx)("option",{hidden:!0,children:"Plats de la carte"}),Object(r.jsx)("option",{disabled:"disabled",default:!0,children:"Plats de la carte"}),a.map((function(e){return Object(r.jsx)("option",{value:e._id,children:e.foodName},e._id)}))]}),Object(r.jsx)("label",{children:"Plat \xe0 modifier"})]}),i._id&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"mui-textfield",children:[Object(r.jsx)("input",{type:"text",name:"foodName",value:i.foodName,required:!0,onChange:f}),Object(r.jsx)("label",{children:"Modifier le nom"})]}),Object(r.jsxs)("div",{className:"mui-select",children:[Object(r.jsxs)("select",{name:"category",value:i.category,required:!0,onChange:f,children:[Object(r.jsx)("option",{hidden:!0,children:i.category&&"Cat\xe9gorie initiale : ".concat(i.category)}),Object(r.jsxs)("option",{disabled:"disabled",default:!0,children:["Cat\xe9gorie initiale : ",i.category]}),Object(r.jsx)("option",{value:"antipasti",children:"antipasti"}),Object(r.jsx)("option",{value:"principal",children:"principal"}),Object(r.jsx)("option",{value:"dessert",children:"dessert"})]}),Object(r.jsx)("label",{children:"Modifier la cat\xe9gorie"})]}),Object(r.jsxs)("div",{className:"mui-textfield",children:[Object(r.jsx)("input",{type:"number",value:i.price,name:"price",min:"1",required:!0,onChange:f}),Object(r.jsx)("label",{children:"Modifier le prix"})]}),Object(r.jsxs)("div",{className:"mui-textfield",children:[Object(r.jsx)("textarea",{value:i.description,name:"description",onChange:f}),Object(r.jsx)("label",{children:"Modifier la description"})]}),b&&Object(r.jsx)("div",{className:"info-box",children:"Vos modifications ont bien \xe9t\xe9 prises en compte."}),p&&Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"})," Veuillez renseigner tous les champs."]}),Object(r.jsxs)("button",{type:"button",onClick:function(e){var t=a.filter((function(e){return e._id===i._id}))[0];l(t)},className:"mui-btn mui-btn--flat mui",children:[Object(r.jsx)("i",{className:"fas fa-times"})," Effacer les modifications"]}),Object(r.jsxs)("div",{className:"btn-group flex-row sp-btw",children:[Object(r.jsxs)("button",{type:"button",onClick:function(e){je(i.foodName,(function(){var e;t((e=i._id,function(){var t=Object(O.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.deleteMeal(e);case 3:r=t.sent,a({type:"food/delete",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(T("food/delete_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),l({}),document.getElementById("pickedMeal").value=""}))},className:"mui-btn mui-btn--flat mui",children:[Object(r.jsx)("i",{className:"fas fa-trash-alt"})," Supprimer le plat"]}),Object(r.jsxs)("button",{type:"submit",disabled:p,className:"mui-btn edit",children:[Object(r.jsx)("i",{className:"fas fa-pen-fancy"})," Modifier"]})]})]})]})})})),pe=Object(o.withRouter)((function(e){return document.title="Admin | modification menu",Object(r.jsxs)("div",{className:"EditMenu AdminPage",children:["update"===e.match.params.mode&&Object(r.jsxs)(n.a.Fragment,{children:[Object(r.jsxs)("header",{className:"form-header",children:[Object(r.jsx)("h2",{className:"sub-title",children:"Modifier la carte"}),Object(r.jsx)(l.b,{to:"/menu",className:"nav-link",target:"_blank",children:"Voir la carte"}),Object(r.jsx)(l.b,{to:"/admin/menu/create",className:"nav-link",children:"Ajouter un plat"})]}),Object(r.jsx)(me,{})]}),"create"===e.match.params.mode&&Object(r.jsxs)(n.a.Fragment,{children:[Object(r.jsxs)("header",{className:"form-header",children:[Object(r.jsx)("h2",{className:"sub-title",children:"Ajouter un plat"}),Object(r.jsx)(l.b,{to:"/menu",className:"nav-link",target:"_blank",children:"Voir la carte"})]}),Object(r.jsx)(be,{})]})]})})),he=x.a.create({baseURL:"https://pepperoni-restaurant.herokuapp.com/api/users",withCredentials:!0}),Oe={service:he,getAllUsers:function(){return he.get("/")},getOneUser:function(e){return he.get("/".concat(e))},deleteUser:function(e){return he.delete("/delete/".concat(e))},updateUser:function(e,t){return he.patch("/edit/".concat(e),t)}},fe=function(e,t){return{type:e,error:!0,payload:t}},xe=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.getAllUsers();case 3:a=e.sent,t({type:"users/getAllUsers",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(fe("users/getAllUsers_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.deleteUser(e);case 3:r=t.sent,a({type:"users/delete",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(fe("users/delete_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ge=function(){var e=Object(j.c)((function(e){return e.authStore})),t=Object(j.b)(),a=function(){var e=Object(O.a)(h.a.mark((function e(a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r={lastName:a.target.elements[0].value,firstName:a.target.elements[1].value,email:a.target.elements[2].value,password:a.target.elements[3].value,privileges:a.target.elements[4].value},e.next=4,t(y(r));case 4:return e.next=6,t(xe());case 6:setTimeout((function(){t((function(e){e({type:"auth/clearMessages"})}))}),5e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(t){var a;if(null===(a=e.invalidCredentials)||void 0===a?void 0:a[t])return Object(r.jsxs)("div",{className:"form-error-msg",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",e.invalidCredentials[t]]})};return Object(r.jsxs)("div",{className:"EmployeeRegistrationForm form-container",children:[Object(r.jsx)("h3",{children:"Enregistrer un(e) nouvel(le) employ\xe9(e)"}),Object(r.jsxs)("form",{className:"mui-form",onSubmit:a,children:[Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"text",name:"lastName",required:!0}),Object(r.jsx)("label",{children:"Nom"})]}),s("lastName"),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"text",name:"firstName",required:!0}),Object(r.jsx)("label",{children:"Pr\xe9nom"})]}),s("firstName"),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"email",name:"email",required:!0}),Object(r.jsx)("label",{children:"Email"})]}),s("email"),Object(r.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(r.jsx)("input",{type:"password",name:"email",required:!0}),Object(r.jsx)("label",{children:"Mot de passe"})]}),s("password"),Object(r.jsxs)("div",{className:"mui-select mui-select--float-label",children:[Object(r.jsxs)("select",{name:"privileges",required:!0,children:[Object(r.jsx)("option",{hidden:!0}),Object(r.jsx)("option",{disabled:"disabled",default:!0,children:"Choisir une cat\xe9gorie (manager et chef sont admin)"}),Object(r.jsx)("option",{value:"admin",children:"Manager ou Chef"}),Object(r.jsx)("option",{value:"employee",children:"Serveur(euse) ou commis"})]}),Object(r.jsx)("label",{children:"Cat\xe9gorie d'emploi"})]}),s("privileges"),Object(r.jsx)("button",{type:"submit",className:"mui-btn mui-btn--flat mui",children:"Enregistrer"})]}),e.successMessage&&Object(r.jsx)("div",{className:"info-box",children:e.successMessage})]})},Ne=function(){var e=Object(j.c)((function(e){return e.userStore})),t=Object(j.c)((function(e){return e.authStore})),a=Object(s.useState)(null),n=Object(R.a)(a,2),c=n[0],i=n[1],l=Object(j.b)();Object(s.useEffect)((function(){l(xe())}),[l]);var o=function(t){var a=t.target.value,r=e.users.find((function(e){return e._id===a})),s=function(){var t=Object(O.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(ve(a));case 2:return t.next=4,l(xe());case 4:e.errorMessage||i(r),setTimeout((function(){i(null)}),3e3);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();je("".concat(r.firstName," ").concat(r.lastName," du staff"),s)};return Object(r.jsxs)(r.Fragment,{children:[c&&Object(r.jsxs)("div",{className:"info-box",children:["Vous venez de supprimer ",c.firstName," ",c.lastName," du staff."]}),Object(r.jsxs)("table",{className:"table of-employees",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Nom"}),Object(r.jsx)("th",{children:"Pr\xe9nom"}),Object(r.jsx)("th",{children:"Pseudo"}),Object(r.jsx)("th",{children:"Status"}),Object(r.jsx)("th",{})]})}),Object(r.jsx)("tbody",{children:e.users.map((function(e){return Object(r.jsxs)("tr",{className:"row",children:[Object(r.jsx)("td",{children:e.lastName}),Object(r.jsx)("td",{children:e.firstName}),Object(r.jsx)("td",{children:e.pseudo}),Object(r.jsx)("td",{children:"admin"===e.privileges?"Manager/Chef(fe)":"Serveur(euse)/Commis"}),Object(r.jsx)("td",{children:t.user._id!==e._id&&Object(r.jsx)("button",{type:"submit",value:e._id,onClick:o,className:"mui-btn mui-btn delete",children:"x"})})]},e._id)}))})]})]})},ye=function(){return document.title="Admin | personnel",Object(r.jsxs)("div",{className:"EmployeesList AdminPage",children:[Object(r.jsx)("h2",{className:"sub-title",children:"Liste du personnel"}),Object(r.jsxs)("div",{className:"flex-row sp-btw align-start",children:[Object(r.jsx)(Ne,{}),Object(r.jsx)(ge,{})]})]})};var Me,we=function(){return Object(r.jsx)(l.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(k,{}),Object(r.jsxs)(o.Switch,{children:[Object(r.jsx)(o.Route,{exact:!0,path:"/",component:D}),Object(r.jsx)(o.Route,{exact:!0,path:"/menu",component:z}),Object(r.jsx)(o.Route,{exact:!0,path:"/reservation",component:se}),Object(r.jsx)(o.Route,{path:"/admin/login",component:ue}),Object(r.jsx)(m,{path:"/admin/staff",component:ye}),Object(r.jsx)(m,{path:"/admin/reservations",component:de}),Object(r.jsx)(m,{path:"/admin/menu/:mode(create|update)",component:pe})]}),Object(r.jsx)(le,{})]})})},Se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,187)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),n(e),c(e)}))},ke=a(30),_e=a(90),Ce={isAuthentificated:!1,user:null,successMessage:null,invalidCredentials:null,warningMessage:null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/registerUser":return Object(u.a)(Object(u.a)({},e),{},{successMessage:t.payload.successMessage||null,invalidCredentials:null});case"auth/registerUser_error":return Object(u.a)(Object(u.a)({},e),{},{invalidCredentials:t.payload.response.data.errors||null});case"auth/login":return Object(u.a)(Object(u.a)({},e),{},{isAuthentificated:!!t.payload,user:t.payload.user||null,successMessage:t.payload.message||null});case"auth/login_error":return Object(u.a)(Object(u.a)({},e),{},{invalidCredentials:t.payload.response.data.errors||null});case"auth/isLoggedIn":return Object(u.a)(Object(u.a)({},e),{},{isAuthentificated:!!t.payload,user:t.payload.user||null});case"auth/isLoggedIn_error":return Object(u.a)(Object(u.a)({},e),{},{isAuthentificated:!1,user:null,invalidCredentials:t.payload.response.data.errors||null});case"auth/logout":return Object(u.a)(Object(u.a)({},e),{},{isAuthentificated:!1,user:null,successMessage:t.payload.successMessage||null});case"auth/clearMessages":return Object(u.a)(Object(u.a)({},e),{},{successMessage:null,invalidCredentials:null,warningMessage:null});default:return e}},Ee={users:[],errorMessages:null},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/getAllUsers":return console.log("reducer got : "+t.payload.length+" employees"),Object(u.a)(Object(u.a)({},e),{},{users:t.payload});case"users/getAllUsers_error":return console.log("reducer got an error :",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessages:t.payload.response.data.errors});case"users/getUser":return Object(u.a)(Object(u.a)({},e),{},{pickedUser:t.payload});case"users/getUser_error":return console.log("reducer got an error :",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessages:t.payload.response.data.errors});case"users/update":return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"users/update_error":return console.log("reducer got an error :",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessages:t.payload.response.data.errors});case"users/delete":return Object(u.a)(Object(u.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.payload._id}))});case"users/delete_error":return console.log("reducer got an error :",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessages:t.payload.response.data.errors});default:return e}},Ae={menu:[],errorMessage:null},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"food/getMenu":return Object(u.a)(Object(u.a)({},e),{},{menu:t.payload});case"food/getMenu_error":return console.log("reducer => fail to get the menu: ",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/getMeal":return Object(u.a)(Object(u.a)({},e),{},{pickedMeal:t.payload});case"food/getMeal_error":return console.log("reducer => fail to getting a meal:",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/create":return Object(u.a)(Object(u.a)({},e),{},{menu:[].concat(Object(B.a)(e.menu),[t.payload])});case"food/create_error":return console.log("reducer => fail to create meal:",t.payload.response.data.errors),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/update":return Object(u.a)(Object(u.a)({},e),{},{menu:e.menu.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"food/update_error":return console.log("reducer => fail to update meal:",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/delete":return console.log("deleted : ",t.payload),Object(u.a)(Object(u.a)({},e),{},{menu:e.menu.filter((function(e){return e._id!==t.payload._id}))});case"food/delete_error":return console.log("reducer => fail to delete meal:",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/clearMessages":return Object(u.a)(Object(u.a)({},e),{},{errorMessage:null});default:return e}},De={reservations:[],slot:null,client:null,isAvailable:!1,tables:[],message:null,successMessage:null,errorMessage:null},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"reservation/getReservations":return Object(u.a)(Object(u.a)({},e),{},{reservations:t.payload.bookedTables,message:t.payload.message||null});case"reservation/getReservations_error":return console.log("reducer => fail to get the reservations: ",t.payload),Object(u.a)(Object(u.a)({},e),{},{reservations:[],errorMessage:t.payload.response.data.errors});case"reservation/slot":return Object(u.a)(Object(u.a)({},e),{},{slot:t.payload.slot});case"reservation/slot_error":return console.log("reducer => fail to create/get slot :",t.payload.response.data.errors),Object(u.a)(Object(u.a)({},e),{},{slot:null,errorMessage:t.payload.response.data.errors});case"reservation/create":return Object(u.a)(Object(u.a)({},e),{},{slot:t.payload.slot,successMessage:t.payload.successMessage});case"reservation/create_error":return console.log("reducer => fail to create reservation:",t.payload.response.data.errors),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"reservation/cancel":return console.log("canceled : ",t.payload),Object(u.a)(Object(u.a)({},e),{},{successMessage:t.payload.successMessage,reservations:e.reservations.filter((function(e){return e._id!==t.payload.slot._id}))});case"reservation/cancel_error":return console.log("reducer => failed to cancel reservation:",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"tables/getAll":return console.log("list of tables : ",t.payload),Object(u.a)(Object(u.a)({},e),{},{tables:t.payload.tables});case"tables/getAll_error":return console.log("reducer => failed to get tables:",t.payload),Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"reservation/clearMessages":return Object(u.a)(Object(u.a)({},e),{},{message:null,successMessage:null,errorMessage:null});default:return e}},Pe=Object(ke.c)({authStore:Re,userStore:Le,foodStore:Ue,reservationStore:Ie}),Te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ke.d,qe=Object(ke.e)(Pe,Te(Object(ke.a)(_e.a)));if(localStorage.sessionCookie&&localStorage.sessionUser){var Fe=JSON.parse(localStorage.sessionCookie),Ve=JSON.parse(localStorage.sessionUser);qe.dispatch({type:"auth/isLoggedIn",payload:{user:Ve}});var ze=new Date;new Date(Fe.expires).getTime()<ze.getTime()?(console.log("Session ended >>> Redirection to homepage."),localStorage.removeItem("sessionCookie"),localStorage.removeItem("sessionUser"),qe.dispatch({type:"auth/logout",payload:{successMessage:"La session a expir\xe9e. Reconnectez-vous."}})):qe.dispatch((Me=Ve._id,function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.isLoggedIn(Me);case 3:a=e.sent,t({type:"auth/isLoggedIn",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(N("auth/isLoggedIn_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}else localStorage.removeItem("sessionCookie"),localStorage.removeItem("sessionUser");i.a.render(Object(r.jsx)(j.a,{store:qe,children:Object(r.jsx)(we,{})}),document.getElementById("root")),Se()},96:function(e,t,a){},97:function(e,t,a){}},[[181,1,2]]]);
//# sourceMappingURL=main.9ae6d187.chunk.js.map